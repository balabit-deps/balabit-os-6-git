From 7c5fbed52514fe06463ff66aa06efcf9abf58db7 Mon Sep 17 00:00:00 2001
From: Johannes Schindelin <johannes.schindelin@gmx.de>
Date: Thu, 19 Sep 2019 23:46:31 +0200
Subject: [PATCH 22/28] quote-stress-test: allow skipping some trials

When the, say, 93rd trial run fails, it is a good idea to have a way to
skip the first 92 trials and dig directly into the 93rd in a debugger.

Signed-off-by: Johannes Schindelin <johannes.schindelin@gmx.de>
---
 test-run-command.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/test-run-command.c b/test-run-command.c
index e6c75def..7035af4d 100644
--- a/test-run-command.c
+++ b/test-run-command.c
@@ -33,11 +33,12 @@ static int quote_stress_test(int argc, const char **argv)
 	 * were passed in.
 	 */
 	char special[] = ".?*\\^_\"'`{}()[]<>@~&+:;$%"; // \t\r\n\a";
-	int i, j, k, trials = 100;
+	int i, j, k, trials = 100, skip = 0;
 	struct strbuf out = STRBUF_INIT;
 	struct argv_array args = ARGV_ARRAY_INIT;
 	struct option options[] = {
 		OPT_INTEGER('n', "trials", &trials, "Number of trials"),
+		OPT_INTEGER('s', "skip", &skip, "Skip <n> trials"),
 		OPT_END()
 	};
 	const char * const usage[] = {
@@ -78,6 +79,9 @@ static int quote_stress_test(int argc, const char **argv)
 			}
 		}
 
+		if (i < skip)
+			continue;
+
 		cp.argv = args.argv;
 		cp.no_stdin = 1;
 		cp.out = -1;
-- 
2.17.1

